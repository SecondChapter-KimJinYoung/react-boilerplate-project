# 테스트

**Vitest** + **jsdom** 기반 테스트 환경입니다.

## 실행 방법

```bash
yarn test              # 전체 테스트 1회 실행
yarn test:watch        # watch 모드 (개발 중 추천)
yarn test:coverage     # 커버리지 리포트 포함
```

### watch 모드 단축키

| 키  | 동작                   |
| --- | ---------------------- |
| `a` | 전체 테스트 실행       |
| `f` | 실패한 테스트만 재실행 |
| `p` | 파일명으로 필터        |
| `t` | 테스트 이름으로 필터   |
| `q` | 종료                   |

## 테스트 파일 규칙

- 테스트 파일은 대상 파일과 **같은 폴더**에 `[파일명].test.ts`로 배치
- 예시: `regex.utils.ts` → `regex.utils.test.ts`
- 설정: `vite.config.ts`의 `test` 블록에서 관리

## 테스트 전략

테스트는 비용 대비 효과가 높은 순서로 점진적으로 확장합니다.

| 우선순위   | 분류               | 대상 파일                                      | 테스트 가치                                                   |
| ---------- | ------------------ | ---------------------------------------------- | ------------------------------------------------------------- |
| 1순위      | 순수 유틸 함수     | `regex.utils.ts`, `file.ts`                     | 입출력 명확, 외부 의존 없음, 버그 시 여러 곳에 파급           |
| 2순위      | 상태/데이터 매핑   | `api.utils.ts`                                 | 분기 로직이 있고, 잘못되면 사용자에게 엉뚱한 메시지 노출      |
| 3순위      | Zustand 스토어     | `auth.store.ts`                                | localStorage 연동 로직에 엣지 케이스 존재 (JSON 파싱 실패 등) |
| 작성 안 함 | 단순 래퍼 컴포넌트 | `Button.tsx`, `Input.tsx` 등                   | props 전달만 하는 컴포넌트는 테스트 ROI가 낮음                |
| 작성 안 함 | 타입/상수 파일     | `api.types.ts`, `api.constants.ts` 등          | 런타임 로직 없음, 타입 체크가 대신함                          |

현재 진행: `regex.utils.test.ts` 완료. 나머지는 기능 개발과 함께 점진적으로 추가합니다.

컴포넌트에 **조건 분기, 상태 변화, 사이드 이펙트**가 추가되는 시점에 해당 컴포넌트의 테스트를 작성합니다.

## 커버리지 확인

`yarn test:coverage` 실행 후 `coverage/index.html`을 브라우저로 열면 파일별/라인별 커버리지를 시각적으로 확인할 수 있습니다.
